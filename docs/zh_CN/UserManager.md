# 用户管理

用户(user)不是账号(account)

使用ADB查看所有用户：

```shell
pm list users
```

上面这条命令返回的结果中，用户名前面的数字就是UserID

## 用户信息

- 用户已解锁：你能看到这个的时候一定解锁了

- 支持多用户：系统是否支持多用户。WearOS即使写着支持多用户，但不一定支持

- 系统用户：UserID为0的用户 **[API23]**

- 管理员用户：可以创建、删除用户。一个设备可以有多个管理员用户 **[API34]**

- 无头系统用户：系统用户运行着系统服务，但是没有分配给任何人使用，不能切换到系统用户（一般在Android Auto上使用） **[API31]**

- 临时用户：临时用户登出后或重启后会被删除 **[API28]**

- 附属用户：详见[附属用户ID](#AffiliatedID)

- UserID：不是UID。系统用户的UserID为0，其他用户（包括工作资料）的UserID从10开始计算

- 序列号：每个用户有不同的序列号（序列号和UserID可能是一样的，但是这是两个不同的东西）

## 用户操作

推荐使用用户序列号来标识用户，如果要使用UID，UID可以是运行在目标用户中的任意应用

无需输入UID/用户序列号的功能：

- **[API28]** 登出当前用户 **[Profile owner（附属）]**

需要输入UID/用户序列号的功能：

**[Device owner]**

- **[API28]** 在后台启动用户
- 切换至用户
- **[API28]** 停止用户
- 移除用户

## 创建并管理用户

**[Device owner]**

**[API24]**

创建一个受管理用户，新用户的头像右下方会有公文包标志

选项：

- 跳过创建用户向导（切换到新用户之后的向导）
- 临时用户 **[API29]**
- 启用所有系统应用（有些系统应用在新用户中是默认不启用的，比如谷歌手机上的YouTube）

创建后，OwnDroid会成为受管理用户中的Profile owner

::: info WearOS

在WearOS上可以创建用户，但是不要切换到创建的用户，否则有可能软变砖

WearOS4(AVD)

:::

<h2 id="AffiliatedID">附属用户ID</h2>

**[Device owner] [Profile owner]**

附属用户ID是一个列表，列表中可以有多个不相同的ID，不考虑顺序

当Device owner创建并管理用户时，新的用户不是附属用户。Device owner设置和受管理用户完全相同的附属用户ID后，受管理用户成为附属于Device owner的用户

Device owner无论在何时都是附属于设备的用户

你可以在用户管理->[用户信息](#用户信息)查看当前用户是否附属用户

## 修改用户名

**[Device owner] [Profile owner]**

## 更换用户头像

**[Device owner] [Profile owner]**

**[API23]**

选择一个图片并设置为当前用户的图标

## 用户会话开始/结束消息

用户会话开始消息：切换到非系统用户时的消息

用户会话结束消息：切换回系统用户时的消息

需设置一个简短的消息，超出限制的文字会被舍弃

